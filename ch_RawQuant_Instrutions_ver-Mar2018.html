<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>RawQuant_instructions_ver-Mar2018</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}

kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb
}

* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>


</head>

<body>

<h2 id="toc_0">RawQuant</h2>

<p>This guide describes the install and use of RawQuant. </p>

<h4 id="toc_1">Installation</h4>

<p>We are starting with a fresh system here. We recommend uninstalling MSFileReader and Python if they are already installed, as the order of installation is important for proper functioning.</p>

<p>RawQuant does not have any specific system requirements, although the script may run slowly on older machines. The computer we are using in this walkthrough has the specs:</p>

<blockquote>
<ul>
<li>Microsoft Windows 10 Enterprise 2015 LTSB</li>
<li>10.0.10240 Build 10240</li>
<li>Optiplex 7040</li>
<li>x64-based PC</li>
<li>Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz, 3408 Mhz, 4 Core(s), 8 Logical Processor(s)</li>
<li>Installed Physical Memory (RAM) 8.00 GB</li>
</ul>
</blockquote>

<p>Let&#39;s walk through the setup:</p>

<ol>
<li>Download Python.

<ul>
<li>The version here is important. We have currently only tested version 3.6.1 (64-bit).</li>
<li>The install file can be downloaded from Python directly (https://www.python.org/downloads/release/python-361/).</li>
</ul></li>
<li><p>Install Python. Use the default &quot;Install Now&quot; option. </p>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen1_crop.png" alt="Alt Image Text"></p></li>
<li><p>Setup Python in the environment variables. </p>

<ul>
<li>Go to &#39;Control Panel&#39;.</li>
<li>Click &#39;System and Security&#39;.</li>
<li>Click &#39;System&#39;.</li>
<li>Click &#39;Advanced System Settings&#39;.</li>
<li>Click &#39;Environment Variables&#39;.</li>
<li>On PATH, click &#39;Edit&#39;.</li>
<li>Add the directory of the Python install to the PATH variable.</li>
</ul>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen2_crop-a.png" alt="Alt Image Text"></p>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen2_crop-b.png" alt="Alt Image Text"></p></li>
<li><p>Add pip to the environment variables as well using the same process. </p>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen4_crop.png" alt="Alt Image Text"></p></li>
<li><p>Check that Python and pip are installed correctly.</p>

<ul>
<li>Open &#39;Command Prompt&#39;.</li>
<li>Type &#39;python --version&#39;.</li>
<li>Type &#39;pip --version&#39;.</li>
</ul>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen3_crop.png" alt="Alt Image Text"></p></li>
<li><p>Install the comtypes package.</p>

<ul>
<li>The version here is important (want version 1.1.3). </li>
<li>The install file can be downloaded from Python directly (https://pypi.python.org/pypi/comtypes/1.1.3).</li>
<li>Open &#39;Command Prompt&#39; if not already open.</li>
<li>Type &#39;pip install &#39;path to comtypes.zip file&#39;.</li>
<li>Restart your computer. </li>
</ul>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen5_crop.png" alt="Alt Image Text"></p></li>
<li><p>Install MSFileReader version 3.0 SP2, 64-bit only (do not install the 32-bit version!).</p>

<ul>
<li>The version here is important. We have currently only tested the mentioned version.</li>
<li>The install file can be downloaded from Thermo (https://thermo.flexnetoperations.com/control/thmo/login?nextURL=%2Fcontrol%2Fthmo%2Fdownload%3Felement%3D6306677). This website requires registration, which is free.</li>
<li>Alternatively, the install file can be downloaded from the RawQuant GitHub page (https://github.com/kevinkovalchik/RawQuant).</li>
<li>After install, restart your computer.</li>
</ul></li>
<li><p>Install the other Python dependencies.</p>

<ul>
<li>Open &#39;Command Prompt&#39;.</li>
<li>Install dependencies using the command &#39;pip install &#39;package name&#39;.</li>
<li>Repeat for packages numpy, pandas, tqdm, joblib, argparse.</li>
</ul>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen6_crop.png" alt="Alt Image Text"></p></li>
<li><p>Copy the MSFileReader.py file from the Python bindings to the Python directory.</p>

<ul>
<li>The MSFileReader.py file can be downloaded from the RawQuant GitHub page (https://github.com/kevinkovalchik/RawQuant). </li>
<li>Copy and paste in the appropriate directory. This will be the Lib directory of the Python you mapped to the environment previously. </li>
</ul>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen7_crop.png" alt="Alt Image Text"></p></li>
<li><p>Check if RawQuant works.</p>

<ul>
<li>Open &#39;Command Prompt&#39;.</li>
<li>Navigate to the directory where you have stored the RawQuant.py script.</li>
<li>Make sure you have admin priveleges. The first time you run RawQuant, the comtypes package needs to build a couple of sub-libraries. After you have run it the first time, you no longer need admin priveleges. In the image below, note the comtypes &#39;generating&#39; lines. This will only happen the first time you run RawQuant with admin.</li>
<li>Enter the command below into the terminal and hit enter.</li>
</ul>

<div><pre><code class="language-bash">python RawQuant.py -h</code></pre></div>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen8_crop.png" alt="Alt Image Text"></p></li>
<li><p>Test RawQuant on a real raw file to see if it is working completely. </p>

<ul>
<li>Download a test raw file from the EBI PRIDE repository for RawQuant (https://www.ebi.ac.uk/pride/archive/projects/PXD008787) or use your own raw file.</li>
<li>Test the raw file (in this example I tested an MS2 and SPS-MS3 file).</li>
</ul>

<div><pre><code class="language-bash">python RawQuant.py parse -f &lt;path to your raw file&gt; -o 2</code></pre></div>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen9_crop.png" alt="Alt Image Text"></p>

<div><pre><code class="language-bash">python RawQuant.py quant -f &lt;path to your raw file&gt; -r TMT10 -i</code></pre></div>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen10_crop.png" alt="Alt Image Text"></p></li>
<li><p>If everything has worked properly, the commands should finish without error, and text output files should be generated in the same directory where the processed raw file(s) is located. </p></li>
</ol>

<h4 id="toc_2">Processing Files with RawQuant</h4>

<p>This section will walk through some common commands and input scenarios for RawQuant as well as discussing some of the output data. </p>

<ol>
<li>Download a test raw file from the EBI PRIDE repository for RawQuant (https://www.ebi.ac.uk/pride/archive/projects/PXD008787) or use your own raw file.</li>
<li>Navigate to the directory where you have stored the RawQuant.py script</li>
<li><p>To invoke the general help for RawQuant use the command:</p>

<div><pre><code class="language-bash">python RawQuant.py -h</code></pre></div></li>
<li><p>To invoke the help for the specific parse and quant functions, use extensions of the previous command.</p>

<div><pre><code class="language-bash">python RawQuant.py parse -h

python RawQuant.py quant -h</code></pre></div></li>
<li><p>These help boxes are worth reading and cover a lot of the basic usage and commands with RawQuant. </p></li>
<li><p>If you are ever confused about input files for things like &#39;custom reagents&#39;, use the examples functionality of RawQuant to generate some files for you to use as a guide.</p>

<div><pre><code class="language-bash">python RawQuant.py examples -h</code></pre></div></li>
<li><p>Let&#39;s perform our own analysis. I am going to use a file acquired on an Orbitrap Fusion downloaded from the above PRIDE repository that was acquired as MS1-Orbitrap HCD-MS2-Orbitrap. The file name is &quot;ch 29Sept2017 eColi-31907 TMT11 MS2 1.raw&quot; if you would like to follow along with the same file.</p></li>
<li><p>First lets process this file using the &#39;parse&#39; functionality of RawQuant. There are multiple flags that the parse command can use as input.</p>

<ul>
<li>&#39;-f&#39; this is the input file, or a list of files separated by spaces.</li>
<li>&#39;-m&#39; this can be used to specify a text file that contains multiple input files to be processed. One per line.</li>
<li>&#39;-o&#39; this specifies the MS orders to be parsed. Can be one number (e.g. -o 2) or a list separated by spaces (e.g. -o 1 2 3). If -o is set to 0, no parsing will be done. This last functionality is potentially desirable if you are looking to only generate an MGF output. If you input a list of values that contains 0 (e.g. 0 1 2), no parsing will be done.</li>
<li>&#39;-mgf&#39; this flag will trigger MGF generation.</li>
<li>&#39;-spd&#39; this will suppress the progress bar during processing. But this is cool to look at, so why would you do that?</li>
</ul>

<div><pre><code class="language-bash">python RawQuant.py parse -h</code></pre></div></li>
<li><p>I am interested in generating parsed output for MS1 and MS2 scans in my raw file, as well as creating an MGF output I can use in a database search.</p>

<div><pre><code class="language-bash">python RawQuant.py parse -f C:\Users\ptx_user\Desktop\RawQuant\ch_29Sept2017_eColi-31907_TMT11_MS2_1.raw -o 1 2 -mgf</code></pre></div></li>
<li><p>Once processing is complete, you should see four files created in the same directory as the raw file.</p>

<ul>
<li>a &#39;metrics.txt&#39; file - this contains some general metrics of the raw file, such as number of MS1 scans, topN rate, duty cycle.</li>
<li>&#39;MS1ParseData.txt&#39; and &#39;MS2ParseData.txt&#39; files - these contain the metrics for every MS1 and MS2 scan found in the raw file. </li>
<li>&#39;MGF.mgf&#39; file - this is a standard MGF output. Use with any search engine who will take MGF input!</li>
</ul></li>
<li><p>Let&#39;s look at the output files a little closer at each of the files. They are tab delimited text files, so they can be opened in most editors and Excel.</p></li>
<li><p>Let&#39;s look at the &#39;metrics.txt&#39; file first. This contains some useful &#39;quick-glance&#39; information.</p>

<ul>
<li>The MS order value denotes the level where MS2 data was acquired. </li>
<li>Total scans denotes the total number of scans in the entire file.</li>
<li>MS1 scans counts the number of MS1 scans.</li>
<li>MS2 scans counts the number of MS2 scans.</li>
<li>Mean topN is the average number of MS2 events triggered in an MS1 scan across the entire run.</li>
<li>MS1 scans/sec counts the number of MS1 scans that occurs every second.</li>
<li>MS2 scans/sec counts the number of MS2 events that are triggered every second.</li>
<li>Mean duty cycle calculates the time (in seconds) between neighbouring MS1 events.<br></li>
</ul>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen11.png" alt="Alt Image Text"></p></li>
<li><p>What about the &#39;MS1ParseData.txt&#39; file. </p>

<ul>
<li>ScanNumber is the scan index for the MS1 event.</li>
<li>RetentionTime is the retention time (in minutes) of the MS1 event.</li>
<li>MS1IonInjectionTime is the injection time (in ms) for the MS1 event.</li>
</ul>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen14.png" alt="Alt Image Text"></p></li>
<li><p>What about the &#39;MS2ParseData.txt&#39; file. This contains a lot of information.</p>

<ul>
<li>ScanNumber is the scan index for the MS2 event.</li>
<li>MS1ScanNumber is the MS1 event that the MS2 scan was triggered from.</li>
<li>RetentionTime is the retention time (in minutes) where the MS2 scan was acquired. </li>
<li>PickedRetentionTime is the retention time (in minutes) where the MS2 ion was targeted for acquisition (so, this is the retention time of the MS1 scan event that it was triggered from).</li>
<li>PeakMaxRetentionTime is the retention time (in minutes) where the maximum intensity for the parent ion selected for MS2 analysis was observed. </li>
<li>PrecursorMass is the m/z of the parent ion selected for MS2.</li>
<li>PrecursorCharge is the determined charge state of the parent ion selected for MS2.</li>
<li>PrecursorPickedIntensity is the intensity of the precursor ion in the MS1 scan closest to where the MS2 scan was carried out (just prior).</li>
<li>PrecursorMaxIntensity is the maximum observed intensity across the elution profile for the parent ion selected for MS2.</li>
<li>PrecursorArea is the detected area across the elution profile for the parent ion selected for MS2.</li>
<li>PrecursorRetentionWidth is the width of the elution profile for the parent ion.</li>
<li>MS1IonInjectionTime is the injection time (in ms) of the MS1 scan where the MS2 event was triggered from.</li>
<li>MS2IonInjectionTime is the injection time (in ms) of the MS2 scan event itself. </li>
</ul>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen12.png" alt="Alt Image Text"></p></li>
<li><p>Let&#39;s move on to processing a quant file. For this example I am going to use a file that was obtained using an SPS-MS3 approach on an Orbitrap Fusion from the above PRIDE repository that was acquired as . The file name is &quot;ch 29Sept2017 eColi-31907 TMT11 2e5-120 1.raw&quot; if you would like to follow along with the same file.</p></li>
<li><p>First lets process this file using the &#39;quant&#39; functionality of RawQuant. There are multiple flags that the quant command can use as input.</p>

<ul>
<li>&#39;-f&#39; this is the input file, or a list of files separated by spaces.</li>
<li>&#39;-m&#39; this can be used to specify a text file that contains multiple input files to be processed. One per line.</li>
<li>&#39;-r&#39; this is the labeling reagents. Built-in options are TMT0, TMT2, TMT6, TMT10, TMT11, iTRAQ4, and iTRAQ8.</li>
<li>&#39;-cr&#39; this is if you want to use custom reagents. Should be a csv file containing user-defined labels and masses. To see an example, use the command &#39;python RawQuant.py examples -r&#39;.</li>
<li>&#39;-i&#39; this will trigger quantification of isolation interference.</li>
<li>&#39;-o&#39; this specifies the MS order where the quantification values are. Can be one number (e.g. -o 2). This flag is optional. If not input, the highest MS order will be assumed. Possible values are 2 and 3. </li>
<li>&#39;-mgf&#39; this flag will trigger MGF generation.</li>
<li>&#39;-spd&#39; this will suppress the progress bar during processing. </li>
<li>&#39;-c&#39; this will correct for isotopic impurities in the reagents. Input should be a csv file containing an impurity matrix. For an example, try &#39;python RawQuant.py examples -c&#39;. </li>
</ul>

<div><pre><code class="language-bash">python RawQuant.py quant -h</code></pre></div></li>
<li><p>I am interested in generating quant output for MS3 scans in my raw file, as well as creating an MGF output I can use in a database search.</p>

<div><pre><code class="language-bash">python RawQuant.py quant -f C:\Users\ptx_user\Desktop\RawQuant\ch_29Sept2017_eColi-31907_TMT11_2e5-120_1.raw -r TMT10 -i -mgf</code></pre></div></li>
<li><p>Once processing is complete, you should see three files created in the same directory as the raw file.</p>

<ul>
<li>a &#39;metrics.txt&#39; file - this contains some general metrics of the raw file, such as number of MS1 scans, topN rate, duty cycle, just as before.</li>
<li>&#39;QuantData.txt&#39; - this contains the quantification and scan data for the MS3 events. </li>
<li>&#39;MGF.mgf&#39; file - this is a standard MGF output. Use with any search engine who will take MGF input!</li>
</ul></li>
<li><p>Let&#39;s look a little closer at the &#39;QuantData.txt&#39; file. It contains a lot of information. </p>

<ul>
<li>ScanNumber is the scan index for the MS3 event.</li>
<li>MS2ScanNumber is the MS2 event that the MS3 scan was triggered from.</li>
<li>MS1ScanNumber is the MS1 event that the MS2 scan that led to the MS3 was triggered from.</li>
<li>RetentionTime is the retention time (in minutes) where the MS3 scan was acquired. </li>
<li>PickedRetentionTime is the retention time (in minutes) where the MS2 ion was targeted for acquisition (so, this is the retention time of the MS1 scan event that it was triggered from).</li>
<li>PeakMaxRetentionTime is the retention time (in minutes) where the maximum intensity for the parent ion selected for MS2 analysis was observed. </li>
<li>PrecursorMass is the m/z of the parent ion selected for MS2.</li>
<li>PrecursorCharge is the determined charge state of the parent ion selected for MS2.</li>
<li>PrecursorPickedIntensity is the intensity of the precursor ion in the MS1 scan closest to where the MS2 scan was carried out (just prior).</li>
<li>PrecursorMaxIntensity is the maximum observed intensity across the elution profile for the parent ion selected for MS2.</li>
<li>PrecursorArea is the detected area across the elution profile for the parent ion selected for MS2. Note, this is not done by curve fitting. </li>
<li>PrecursorRetentionWidth is the width of the elution profile for the parent ion.</li>
<li>MS1IonInjectionTime is the injection time (in ms) of the MS1 scan where the MS2 event was triggered from.</li>
<li>MS2IonInjectionTime is the injection time (in ms) of the MS2 scan event.</li>
<li>MS3IonInjectionTime is the injection time (in ms) of the MS3 scan event.</li>
<li>MS1Interference in the amount of signal in the isolation window that is not from the selected precursor (represented as a percent).</li>
<li>tmt126_mass is the observed mass for the specified TMT reporter ion.</li>
<li>tmt126_ppm is the error (in ppm) of the observed mass vs. the expected reporter ion mass.</li>
<li>tmt126_intensity is the observed intensity of the reporter ion.</li>
<li>tmt126_res is the observed resolution of the reporter ion.</li>
<li>tmt126_bl is the observed background signal of the reporter ion.</li>
<li>tmt126_noise is the Orbitrap pre-amplifier noise for the reporter ion.</li>
<li>SPSMass are the masses of the ions selected from the MS2 scan for SPS-MS3 analysis.</li>
<li>SPSIntensity are the intensities of the selected SPS ions. </li>
</ul>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen13.png" alt="Alt Image Text"></p></li>
</ol>

<h4 id="toc_3">Using the RawQuant output in your analysis</h4>

<p>There are numerous ways you can capitalize on the data output from RawQuant. For some code examples that process RawQuant output and combine them with search results from PeptideShaker, please see the GitHub associated with the RawQuant manuscript (https://github.com/chrishuges/RawQuant_JPR-2018). There are a wide variety of RNotebook code snippets here that can be followed for doing numerous analyses. Potential analysis pipelines of RawQuant data include:</p>

<ul>
<li>Parse your data file with RawQuant. Use the generated &#39;metrics&#39; file to measure the performance of your MS across a wide variety of acquisition parameters, or monitor the performance over time.</li>
<li>Parse your data file with RawQuant and generate an MGF. Process the MGF using a search tool that accepts MGF input (e.g. Mascot, SearchGUI...and many other search engines). Use the MS2 scan numbers of the peptide matches to combine with the parsed RawQuant data (ScanNumber column in RawQuant). Check the metrics of the peptides that were identified, are you always hitting the max injection time for MS2? Can you afford to scan faster? Or do you need to go slower?</li>
<li>Quantify your data file with RawQuant and generate an MGF. As before, search your data using any program that will take an MGF input. Now you have many options:

<ul>
<li>Combine the quant and search output using ScanNumbers, just as before. PeptideShaker, for example, outputs these by default in the peptide spectral match output, as does Proteome Discoverer. Process your data in R using some of the code mentioned above.</li>
<li>Input your quantification matrix into MSnbase (R) and process in combination with your modifications data.</li>
<li>Use the MGF file alone in Isobar (R) to gather quantification and identification data.</li>
<li>Use another tool I don&#39;t know about to do the same thing! The open source nature of RawQuant here gives you many options. Test and choose what works best for your own sample analysis!</li>
</ul></li>
</ul>

<p>Let&#39;s look at an example for combining the RawQuant data with search engines.</p>

<ol>
<li>In the RawQuant manuscript, we used SearchGUI and PeptideShaker a lot. As you saw above, the RawQuant output always contains the columns &#39;ScanNumber&#39;, or &#39;MS2ScanNumber&#39;, &#39;MS1ScanNumber&#39; and so on. </li>
<li><p>PeptideShaker can output a variety of reports. The one we are interested in for combination is the &#39;Default PSM Report&#39;.</p>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen15.png" alt="Alt Image Text"></p></li>
<li><p>As you can see, there is a lot of information here. Unfortunately, at the moment, the scan number is a bit messed up because of the MGF format of RawQuant (known bug), but this information is still accessible from the &#39;Spectrum Title&#39; column.</p>

<p><img src="/Users/chughes/Documents/google-drive_nov2017/raw-quant_manuscript/script-manuscript/revisions/screens/screen16.png" alt="Alt Image Text"></p></li>
<li><p>Using R, Python, or your language of choice, you can combine the RawQuant output with the PeptideShaker results by combining this spectrum number with the appropriate column from RawQuant.</p>

<ul>
<li>For a parsed file where -o 2 was used, this will be the &#39;ScanNumber&#39; column.</li>
<li>for a quant file where quant was in MS2, this will be the &#39;ScanNumber&#39; column.</li>
<li>for a quant file where the quant was SPS-MS3, this will be the &#39;MS2ScanNumber&#39; column.</li>
</ul></li>
<li><p>For combining with other search engines, you simply need to locate the output file that contains the MS2 scan number of a given peptide spectral match, or peptide match and align this with the same values in the RawQuant tables. </p>

<ul>
<li>In MaxQuant, this data is available in the &#39;peptides.txt&#39; output file.</li>
<li>In the Trans-Proteomic Pipeline, this data can be made available in the PeptideProphet output. </li>
<li>In Proteome Discoverer, this data is available in the PSM report. </li>
</ul></li>
</ol>

<p>What about using the RawQuant output for other tools?</p>

<ol>
<li><p>As mentioned above, the quantification matrices can be directly input into R or Python (or any other tools that accept tab delimited text files. </p>

<ul>
<li>You can use the quantification data as input to a wide variety of R packages that take expression data, such as microarray tools like Limma, or VSN.</li>
<li>Perform differential abundance analysis of the peptides using R packages like Limma or PECA.<br></li>
<li>You can also use the data as input for other packages that are more proteomics focused, such as MSnbase. </li>
</ul></li>
<li><p>The MGF output can be used as input to a variety of pipelines based in R or Python.</p>

<ul>
<li>Use the MGF output as a basis for quantification and identification using Isobar.</li>
<li>Perform database matching with the MGF using packages such as rTandem and MSGFplus. </li>
</ul></li>
<li><p>The parsed data can also be directly input into R and Python to perform your own calculations of topN, scan rate, ID rate, etc...</p>

<ul>
<li>Use the R code guides fround on https://github.com/chrishuges/RawQuant_JPR-2018 to get ideas and help.</li>
<li>Design your own code to track instrument performance over time based on parsed data.</li>
</ul></li>
</ol>

<p>The massive number of tools available to proteomics researchers now means that you can combine RawQuant data with virtually any sort of analysis pipeline. The specifics will depend on the software tools you are using, and the data made available by these packages. </p>

<h4 id="toc_4">Final notes</h4>

<p>RawQuant is in active development. We hope to have a GUI-based version sometime in the near future. If you have any issues, or have encountered a bug, or there is a feature you would really like to see, please do not hesitate to contact Kevin Kovalchik (kkovalchik@bcgsc.ca) or Christopher Hughes (chughes@bcgsc.ca), and we will do our best to get you using our tool!</p>




</body>

</html>
